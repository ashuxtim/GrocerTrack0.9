{"version":3,"file":"static/js/295.288cf2d0.chunk.js","mappings":"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","sources":["pages/ProductPage.js","components/EmptyState.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\n\r\nimport { \r\n    Box, Button, TextField, Typography, Card, CardContent, Modal, IconButton,\r\n    Autocomplete, Grid, FormControl, InputLabel, Select, MenuItem, List, ListItem, ListItemText,\r\n    Chip, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle\r\n} from '@mui/material';\r\nimport { DataGrid } from '@mui/x-data-grid';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport EmptyState from '../components/EmptyState'; // --- NEW IMPORT ---\r\n\r\n// ... (keep modalStyle and initialNewProductState constants) ...\r\nconst modalStyle = {\r\n  position: 'absolute', top: '50%', left: '50%', transform: 'translate(-50%, -50%)', width: 400,\r\n  bgcolor: 'background.paper', boxShadow: 24, p: 4, borderRadius: 2,\r\n};\r\nconst initialNewProductState = {\r\n    productName: '', variantName: '', price: '', unit: 'piece', current_stock: 0,\r\n};\r\n\r\nfunction ProductPage() {\r\n    // ... (keep all state declarations and functions as they are) ...\r\n    const [products, setProducts] = useState([]);\r\n    const [editingVariant, setEditingVariant] = useState(null);\r\n    const [editVariantData, setEditVariantData] = useState({ price: '', current_stock: '' });\r\n    const [newProductData, setNewProductData] = useState(initialNewProductState);\r\n    const [dialogOpen, setDialogOpen] = useState(false);\r\n    const [itemToDelete, setItemToDelete] = useState(null);\r\n\r\n    const fetchProducts = () => {\r\n        axios.get('http://localhost:8000/api/products/').then(res => setProducts(res.data));\r\n    };\r\n    useEffect(() => { fetchProducts(); }, []);\r\n\r\n    const rows = products.flatMap(product => \r\n        product.variants.map(variant => ({\r\n            id: variant.id, productName: product.name, variantName: variant.name,\r\n            price: variant.price, currentStock: variant.current_stock, unit: variant.unit,\r\n            fullVariant: variant \r\n        }))\r\n    );\r\n    const handleOpenDialog = (id, type, name) => {\r\n        setItemToDelete({ id, type, name });\r\n        setDialogOpen(true);\r\n    };\r\n    const handleCloseDialog = () => {\r\n        setDialogOpen(false);\r\n        setItemToDelete(null);\r\n    };\r\n    const handleConfirmDelete = () => {\r\n        if (!itemToDelete) return;\r\n        const { id, type } = itemToDelete;\r\n        let deletePromise;\r\n        if (type === 'product') {\r\n            deletePromise = axios.delete(`http://localhost:8000/api/products/${id}/`);\r\n        } else {\r\n            deletePromise = axios.delete(`http://localhost:8000/api/variants/${id}/`);\r\n        }\r\n        deletePromise.then(() => {\r\n            toast.success(`${type.charAt(0).toUpperCase() + type.slice(1)} deleted.`);\r\n            fetchProducts();\r\n        }).catch(() => {\r\n            toast.error(`Could not delete. It may be part of a sale record.`);\r\n        }).finally(() => {\r\n            handleCloseDialog();\r\n        });\r\n    };\r\n    const handleNewProductChange = (e) => {\r\n        setNewProductData({ ...newProductData, [e.target.name]: e.target.value });\r\n    };\r\n    const handleAddProductAndVariant = (e) => {\r\n        e.preventDefault();\r\n        let productPromise;\r\n        const existingProduct = products.find(p => p.name.toLowerCase() === newProductData.productName.toLowerCase());\r\n        if (existingProduct) {\r\n            productPromise = Promise.resolve({ data: existingProduct });\r\n        } else {\r\n            productPromise = axios.post('http://localhost:8000/api/products/', { name: newProductData.productName });\r\n        }\r\n        productPromise.then(response => {\r\n            const productId = response.data.id;\r\n            const variantPayload = { product: productId, name: newProductData.variantName, price: newProductData.price, unit: newProductData.unit, current_stock: newProductData.current_stock };\r\n            return axios.post('http://localhost:8000/api/variants/', variantPayload);\r\n        }).then(() => {\r\n            toast.success('New product added successfully!');\r\n            setNewProductData(initialNewProductState);\r\n            fetchProducts();\r\n        }).catch(err => {\r\n            toast.error('Failed to add product.');\r\n            console.error(err);\r\n        });\r\n    };\r\n    const handleEditClick = (row) => {\r\n        setEditingVariant(row.fullVariant); \r\n        setEditVariantData({ price: row.price, current_stock: row.currentStock });\r\n    };\r\n    const handleUpdateVariant = (e) => {\r\n        e.preventDefault();\r\n        const updatedData = { ...editingVariant, ...editVariantData }; \r\n        axios.put(`http://localhost:8000/api/variants/${editingVariant.id}/`, updatedData)\r\n            .then(() => {\r\n                toast.success('Variant updated!');\r\n                setEditingVariant(null);\r\n                fetchProducts();\r\n            });\r\n    };\r\n\r\n    const columns = [\r\n        { field: 'productName', headerName: 'Product', flex: 1 },\r\n        { field: 'variantName', headerName: 'Variant', flex: 1 },\r\n        { field: 'price', headerName: 'Price (â‚¹)', type: 'number', flex: 0.5 },\r\n        { field: 'currentStock', headerName: 'Stock', type: 'number', flex: 0.5 },\r\n        {\r\n            field: 'status', headerName: 'Status', flex: 0.7,\r\n            renderCell: (params) => {\r\n                const stock = params.row.currentStock;\r\n                let label, color;\r\n                if (stock <= 0) { label = 'Out of Stock'; color = 'error';\r\n                } else if (stock <= 10) { label = 'Low Stock'; color = 'warning';\r\n                } else { label = 'In Stock'; color = 'success'; }\r\n                return <Chip label={label} color={color} size=\"small\" />;\r\n            }\r\n        },\r\n        {\r\n            field: 'actions', headerName: 'Actions', type: 'actions', flex: 0.5,\r\n            getActions: (params) => [\r\n                <IconButton onClick={() => handleEditClick(params.row)}><EditIcon /></IconButton>,\r\n                <IconButton onClick={() => handleOpenDialog(params.id, 'variant', params.row.variantName)}><DeleteIcon color=\"error\" /></IconButton>,\r\n            ]\r\n        }\r\n    ];\r\n    const productOptions = products.map(p => ({ label: p.name }));\r\n\r\n    return (\r\n        <Box>\r\n            <Grid container spacing={3}>\r\n                <Grid item xs={12} md={8}>\r\n                    <Typography variant=\"h2\" gutterBottom>ðŸ“¦ Product Inventory</Typography>\r\n                    <Card sx={{ mb: 3 }}>\r\n                        <CardContent>\r\n                            <Typography variant=\"h3\" gutterBottom>Add New Product</Typography>\r\n                            <Box component=\"form\" onSubmit={handleAddProductAndVariant}>\r\n                                <Grid container spacing={2} alignItems=\"center\">\r\n                                    <Grid item xs={12}>\r\n                                        <Autocomplete freeSolo options={productOptions} value={newProductData.productName}\r\n                                            onInputChange={(event, newInputValue) => { setNewProductData({ ...newProductData, productName: newInputValue }); }}\r\n                                            renderInput={(params) => <TextField {...params} label=\"Product Name (Select existing or type a new one)\" required />}\r\n                                        />\r\n                                    </Grid>\r\n                                    <Grid item xs={12} sm={6}><TextField name=\"variantName\" label=\"Variant Name\" value={newProductData.variantName} onChange={handleNewProductChange} required fullWidth /></Grid>\r\n                                    <Grid item xs={12} sm={6}><TextField name=\"price\" label=\"Price\" type=\"number\" value={newProductData.price} onChange={handleNewProductChange} required fullWidth /></Grid>\r\n                                    <Grid item xs={12} sm={4}><FormControl fullWidth><InputLabel>Unit</InputLabel>\r\n                                        <Select name=\"unit\" value={newProductData.unit} label=\"Unit\" onChange={handleNewProductChange}>\r\n                                            <MenuItem value=\"piece\">Piece</MenuItem><MenuItem value=\"kg\">Kilogram</MenuItem>\r\n                                            <MenuItem value=\"packet\">Packet</MenuItem><MenuItem value=\"litre\">Litre</MenuItem>\r\n                                        </Select>\r\n                                    </FormControl></Grid>\r\n                                    <Grid item xs={12} sm={4}><TextField name=\"current_stock\" label=\"Initial Stock\" type=\"number\" value={newProductData.current_stock} onChange={handleNewProductChange} required fullWidth /></Grid>\r\n                                    <Grid item xs={12} sm={4}><Button type=\"submit\" variant=\"contained\" fullWidth size=\"large\">Add Product</Button></Grid>\r\n                                </Grid>\r\n                            </Box>\r\n                        </CardContent>\r\n                    </Card>\r\n                    <Card>\r\n                        <Box sx={{ height: 600, width: '100%' }}>\r\n                            <DataGrid\r\n                                rows={rows}\r\n                                columns={columns}\r\n                                // --- NEW SLOT PROP ---\r\n                                slots={{\r\n                                    noRowsOverlay: () => <EmptyState title=\"No Products\" message=\"Get started by adding a new product.\" />,\r\n                                }}\r\n                            />\r\n                        </Box>\r\n                    </Card>\r\n                </Grid>\r\n                <Grid item xs={12} md={4}>\r\n                    <Typography variant=\"h2\" gutterBottom sx={{ color: 'transparent', userSelect: 'none' }}>.</Typography>\r\n                    <Card>\r\n                        <CardContent>\r\n                            <Typography variant=\"h3\" gutterBottom>Manage Categories</Typography>\r\n                            {products.length > 0 ? (\r\n                                <List>\r\n                                    {products.map((product) => (\r\n                                        <ListItem key={product.id} secondaryAction={<IconButton edge=\"end\" onClick={() => handleOpenDialog(product.id, 'product', product.name)}><DeleteIcon color=\"error\" /></IconButton>}>\r\n                                            <ListItemText primary={product.name} secondary={`${product.variants.length} variant(s)`} />\r\n                                        </ListItem>\r\n                                    ))}\r\n                                </List>\r\n                            ) : (\r\n                                <Typography sx={{ mt: 2, textAlign: 'center', color: 'text.secondary' }}>No product categories yet.</Typography>\r\n                            )}\r\n                        </CardContent>\r\n                    </Card>\r\n                </Grid>\r\n            </Grid>\r\n            <Modal open={!!editingVariant} onClose={() => setEditingVariant(null)}>\r\n                <Box sx={modalStyle} component=\"form\" onSubmit={handleUpdateVariant}>\r\n                    <Typography variant=\"h6\" component=\"h2\" gutterBottom>Edit {editingVariant?.name}</Typography>\r\n                    <TextField label=\"Price\" type=\"number\" value={editVariantData.price} onChange={e => setEditVariantData({...editVariantData, price: e.target.value})} fullWidth sx={{ mb: 2 }} />\r\n                    <TextField label=\"Current Stock\" type=\"number\" value={editVariantData.current_stock} onChange={e => setEditVariantData({...editVariantData, current_stock: e.target.value})} fullWidth sx={{ mb: 2 }} />\r\n                    <Button type=\"submit\" variant=\"contained\">Save Changes</Button>\r\n                </Box>\r\n            </Modal>\r\n            <Dialog open={dialogOpen} onClose={handleCloseDialog}>\r\n                <DialogTitle>Confirm Deletion</DialogTitle>\r\n                <DialogContent><DialogContentText>\r\n                    Are you sure you want to delete the {itemToDelete?.type} \"{itemToDelete?.name}\"? This action cannot be undone.\r\n                </DialogContentText></DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleCloseDialog}>Cancel</Button>\r\n                    <Button onClick={handleConfirmDelete} color=\"error\" autoFocus>Delete</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </Box>\r\n    );\r\n}\r\n\r\nexport default ProductPage;","import React from 'react';\r\nimport { Box, Typography } from '@mui/material';\r\nimport InboxIcon from '@mui/icons-material/Inbox';\r\n\r\nconst EmptyState = ({ title, message }) => {\r\n  return (\r\n    <Box\r\n      sx={{\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        textAlign: 'center',\r\n        p: 3,\r\n        height: '100%',\r\n        minHeight: 200,\r\n        color: 'text.secondary',\r\n      }}\r\n    >\r\n      <InboxIcon sx={{ fontSize: 60, mb: 2, color: 'neutral.main' }} />\r\n      <Typography variant=\"h6\" component=\"p\" gutterBottom>{title}</Typography>\r\n      <Typography variant=\"body1\">{message}</Typography>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default EmptyState;"],"names":["modalStyle","position","top","left","transform","width","bgcolor","boxShadow","p","borderRadius","initialNewProductState","productName","variantName","price","unit","current_stock","products","setProducts","useState","editingVariant","setEditingVariant","editVariantData","setEditVariantData","newProductData","setNewProductData","dialogOpen","setDialogOpen","itemToDelete","setItemToDelete","fetchProducts","axios","get","then","res","data","useEffect","rows","flatMap","product","variants","map","variant","id","name","currentStock","fullVariant","handleOpenDialog","type","handleCloseDialog","handleNewProductChange","e","_objectSpread","target","value","columns","field","headerName","flex","renderCell","params","stock","row","label","color","_jsx","Chip","size","getActions","IconButton","onClick","handleEditClick","children","EditIcon","DeleteIcon","productOptions","_jsxs","Box","Grid","container","spacing","item","xs","md","Typography","gutterBottom","Card","sx","mb","CardContent","component","onSubmit","productPromise","preventDefault","existingProduct","find","toLowerCase","Promise","resolve","post","response","variantPayload","toast","success","catch","err","error","console","alignItems","Autocomplete","freeSolo","options","onInputChange","event","newInputValue","renderInput","TextField","required","sm","onChange","fullWidth","FormControl","InputLabel","Select","MenuItem","Button","height","DataGrid","slots","noRowsOverlay","EmptyState","title","message","userSelect","length","List","ListItem","secondaryAction","edge","ListItemText","primary","secondary","concat","mt","textAlign","Modal","open","onClose","updatedData","put","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","handleConfirmDelete","deletePromise","delete","charAt","toUpperCase","slice","finally","autoFocus","_ref","display","flexDirection","justifyContent","minHeight","InboxIcon","fontSize"],"sourceRoot":""}