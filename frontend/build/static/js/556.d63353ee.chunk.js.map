{"version":3,"file":"static/js/556.d63353ee.chunk.js","mappings":"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","sources":["../node_modules/@mui/icons-material/esm/Inbox.js","pages/CustomerPage.js","components/EmptyState.js"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 3H4.99c-1.11 0-1.98.89-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.11-.9-2-2-2m0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19z\"\n}), 'Inbox');","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\n\r\nimport {\r\n  TextField, Button, Select, MenuItem, FormControl, InputLabel, Box,\r\n  Grid, Card, CardContent, Typography, List, ListItem, ListItemText,\r\n  ListItemButton, IconButton, Pagination,\r\n  Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle\r\n} from '@mui/material';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport EmptyState from '../components/EmptyState';\r\n\r\nconst PAGE_SIZE = 10;\r\n\r\nfunction CustomerPage() {\r\n    const [customers, setCustomers] = useState([]);\r\n    const [allCustomersForDropdown, setAllCustomersForDropdown] = useState([]);\r\n    const [name, setName] = useState('');\r\n    const [mobile, setMobile] = useState('');\r\n    const [paymentCustomer, setPaymentCustomer] = useState('');\r\n    const [paymentAmount, setPaymentAmount] = useState('');\r\n    const [page, setPage] = useState(1);\r\n    const [count, setCount] = useState(0);\r\n    const [dialogOpen, setDialogOpen] = useState(false);\r\n    const [itemToDelete, setItemToDelete] = useState(null);\r\n\r\n    const fetchPaginatedCustomers = (currentPage) => {\r\n        axios.get(`http://localhost:8000/api/customers/?page=${currentPage}`)\r\n            .then(response => {\r\n                setCustomers(response.data.results || []);\r\n                setCount(response.data.count || 0);\r\n            }).catch(error => {\r\n                console.error('Error fetching customers:', error);\r\n                setCustomers([]);\r\n            });\r\n    };\r\n    const fetchAllCustomers = () => {\r\n        axios.get('http://localhost:8000/api/customers/all/')\r\n            .then(res => {\r\n                setAllCustomersForDropdown(res.data || []);\r\n            }).catch(error => {\r\n                console.error('Error fetching ALL customers:', error);\r\n                setAllCustomersForDropdown([]);\r\n            });\r\n    };\r\n    useEffect(() => { fetchPaginatedCustomers(page); }, [page]);\r\n    useEffect(() => { fetchAllCustomers(); }, []);\r\n    const handleOpenDialog = (id, name) => {\r\n        setItemToDelete({ id, name });\r\n        setDialogOpen(true);\r\n    };\r\n    const handleCloseDialog = () => {\r\n        setDialogOpen(false);\r\n        setItemToDelete(null);\r\n    };\r\n    const handleConfirmDelete = () => {\r\n        if (!itemToDelete) return;\r\n        axios.delete(`http://localhost:8000/api/customers/${itemToDelete.id}/`)\r\n            .then(() => {\r\n                toast.success('Customer deleted successfully!');\r\n                fetchPaginatedCustomers(page);\r\n                fetchAllCustomers();\r\n            }).catch(error => {\r\n                console.error('Error deleting customer:', error);\r\n                toast.error('Failed to delete customer.');\r\n            }).finally(() => {\r\n                handleCloseDialog();\r\n            });\r\n    };\r\n    const handleAddCustomer = (event) => {\r\n        event.preventDefault();\r\n        axios.post('http://localhost:8000/api/customers/', { name, mobile })\r\n            .then(() => {\r\n                toast.success('Customer added successfully!');\r\n                setName(''); setMobile('');\r\n                fetchPaginatedCustomers(page);\r\n                fetchAllCustomers();\r\n            });\r\n    };\r\n    const handleAddPayment = (event) => {\r\n        event.preventDefault();\r\n        if (!paymentCustomer || !paymentAmount) {\r\n            toast.warn('Please select a customer and enter an amount.');\r\n            return;\r\n        }\r\n        axios.post('http://localhost:8000/api/payments/', { customer: paymentCustomer, amount: paymentAmount })\r\n            .then(() => {\r\n                toast.success('Payment recorded successfully!');\r\n                setPaymentCustomer('');\r\n                setPaymentAmount('');\r\n            });\r\n    };\r\n    const handlePageChange = (event, value) => {\r\n        setPage(value);\r\n    };\r\n\r\n\r\n    return (\r\n        <Box>\r\n            <Typography variant=\"h2\" gutterBottom>ðŸ‘¥ Customers</Typography>\r\n            <Grid container spacing={3}>\r\n                 <Grid item xs={12} md={6}><Card><CardContent>\r\n                    <Typography variant=\"h3\" gutterBottom>Add New Customer</Typography>\r\n                    <Box component=\"form\" onSubmit={handleAddCustomer} sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\r\n                        <TextField label=\"Full Name\" variant=\"outlined\" value={name} onChange={e => setName(e.target.value)} required />\r\n                        <TextField label=\"Mobile Number\" variant=\"outlined\" value={mobile} onChange={e => setMobile(e.target.value)} />\r\n                        <Button type=\"submit\" variant=\"contained\">Add Customer</Button>\r\n                    </Box>\r\n                </CardContent></Card></Grid>\r\n                <Grid item xs={12} md={6}><Card><CardContent>\r\n                    <Typography variant=\"h3\" gutterBottom>Record Payment</Typography>\r\n                     <Box component=\"form\" onSubmit={handleAddPayment} sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\r\n                        <FormControl fullWidth><InputLabel>Select Customer</InputLabel>\r\n                            <Select value={paymentCustomer} label=\"Select Customer\" onChange={e => setPaymentCustomer(e.target.value)} required>\r\n                                {allCustomersForDropdown.map(c => <MenuItem key={c.id} value={c.id}>{c.name}</MenuItem>)}\r\n                            </Select>\r\n                        </FormControl>\r\n                        <TextField label=\"Amount Paid\" variant=\"outlined\" type=\"number\" value={paymentAmount} onChange={e => setPaymentAmount(e.target.value)} required />\r\n                        <Button type=\"submit\" variant=\"contained\">Record Payment</Button>\r\n                    </Box>\r\n                </CardContent></Card></Grid>\r\n                <Grid item xs={12}>\r\n                    <Card>\r\n                        <CardContent>\r\n                            <Typography variant=\"h3\" gutterBottom>All Customers</Typography>\r\n                            {customers.length > 0 ? (\r\n                                <List>\r\n                                    {customers.map(customer => (\r\n                                        <ListItem key={customer.id}\r\n                                            secondaryAction={<IconButton edge=\"end\" onClick={() => handleOpenDialog(customer.id, customer.name)}><DeleteIcon color=\"error\" /></IconButton>}\r\n                                            disablePadding\r\n                                        >\r\n                                            <ListItemButton component={Link} to={`/customer/${customer.id}`}>\r\n                                                <ListItemText primary={customer.name} />\r\n                                            </ListItemButton>\r\n                                        </ListItem>\r\n                                    ))}\r\n                                </List>\r\n                            ) : (\r\n                                <EmptyState title=\"No Customers\" message=\"Get started by adding a new customer.\" />\r\n                            )}\r\n                        </CardContent>\r\n                        {count > PAGE_SIZE && (\r\n                            <Box sx={{ display: 'flex', justifyContent: 'center', p: 2 }}>\r\n                                {/* --- THE FIX IS HERE --- */}\r\n                                <Pagination count={Math.ceil(count / PAGE_SIZE)} page={page} onChange={handlePageChange} color=\"primary\"/>\r\n                            </Box>\r\n                        )}\r\n                    </Card>\r\n                </Grid>\r\n            </Grid>\r\n            <Dialog open={dialogOpen} onClose={handleCloseDialog}>\r\n                <DialogTitle>Confirm Deletion</DialogTitle>\r\n                <DialogContent><DialogContentText>\r\n                    Are you sure you want to delete customer \"{itemToDelete?.name}\"? This will also delete their entire sales and payment history.\r\n                </DialogContentText></DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleCloseDialog}>Cancel</Button>\r\n                    <Button onClick={handleConfirmDelete} color=\"error\" autoFocus>Delete</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </Box>\r\n    );\r\n}\r\n\r\nexport default CustomerPage;","import React from 'react';\r\nimport { Box, Typography } from '@mui/material';\r\nimport InboxIcon from '@mui/icons-material/Inbox';\r\n\r\nconst EmptyState = ({ title, message }) => {\r\n  return (\r\n    <Box\r\n      sx={{\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        textAlign: 'center',\r\n        p: 3,\r\n        height: '100%',\r\n        minHeight: 200,\r\n        color: 'text.secondary',\r\n      }}\r\n    >\r\n      <InboxIcon sx={{ fontSize: 60, mb: 2, color: 'neutral.main' }} />\r\n      <Typography variant=\"h6\" component=\"p\" gutterBottom>{title}</Typography>\r\n      <Typography variant=\"body1\">{message}</Typography>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default EmptyState;"],"names":["createSvgIcon","_jsx","d","customers","setCustomers","useState","allCustomersForDropdown","setAllCustomersForDropdown","name","setName","mobile","setMobile","paymentCustomer","setPaymentCustomer","paymentAmount","setPaymentAmount","page","setPage","count","setCount","dialogOpen","setDialogOpen","itemToDelete","setItemToDelete","fetchPaginatedCustomers","currentPage","axios","get","concat","then","response","data","results","catch","error","console","fetchAllCustomers","res","useEffect","handleCloseDialog","_jsxs","Box","children","Typography","variant","gutterBottom","Grid","container","spacing","item","xs","md","Card","CardContent","component","onSubmit","event","preventDefault","post","toast","success","sx","display","flexDirection","gap","TextField","label","value","onChange","e","target","required","Button","type","customer","amount","warn","FormControl","fullWidth","InputLabel","Select","map","c","MenuItem","id","length","List","ListItem","secondaryAction","IconButton","edge","onClick","handleOpenDialog","DeleteIcon","color","disablePadding","ListItemButton","Link","to","ListItemText","primary","EmptyState","title","message","justifyContent","p","Pagination","Math","ceil","handlePageChange","Dialog","open","onClose","DialogTitle","DialogContent","DialogContentText","DialogActions","handleConfirmDelete","delete","finally","autoFocus","_ref","alignItems","textAlign","height","minHeight","InboxIcon","fontSize","mb"],"sourceRoot":""}