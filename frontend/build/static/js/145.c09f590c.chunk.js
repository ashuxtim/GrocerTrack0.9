"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[145],{5145:(e,t,s)=>{s.r(t),s.d(t,{default:()=>N});var n=s(5043),l=s(5352),r=s(9722),a=s(7488),o=s(3969),c=s(5895),i=s(998),d=s(1244),u=s(6128),h=s(6154),m=s(2097),x=s(256),A=s(9067),j=s(4481),p=s(7471),f=s(5315),g=s(2394),v=s(6647),y=s(8403),C=s(6185),b=s(6465),S=s(3023),k=s(1911),R=s(8776),w=s(9200),D=s(5877),P=s(5362),B=s(579);const N=function(){const[e,t]=(0,n.useState)([]),[s,N]=(0,n.useState)([]),[q,E]=(0,n.useState)(""),[F,M]=(0,n.useState)(""),[T,W]=(0,n.useState)(""),[_,z]=(0,n.useState)(""),[G,H]=(0,n.useState)(1),[I,J]=(0,n.useState)(0),[K,L]=(0,n.useState)(!1),[O,Q]=(0,n.useState)(null),U=e=>{r.A.get("http://localhost:8000/api/customers/?page=".concat(e)).then(e=>{t(e.data.results),J(e.data.count)})},V=()=>{r.A.get("http://localhost:8000/api/customers/all/").then(e=>{N(e.data)})};(0,n.useEffect)(()=>{U(G)},[G]),(0,n.useEffect)(()=>{V()},[]);const X=()=>{L(!1),Q(null)};return(0,B.jsxs)(o.A,{children:[(0,B.jsx)(c.A,{variant:"h2",gutterBottom:!0,children:"\ud83d\udc65 Customers"}),(0,B.jsxs)(i.A,{container:!0,spacing:3,children:[(0,B.jsx)(i.A,{item:!0,xs:12,md:6,children:(0,B.jsx)(d.A,{children:(0,B.jsxs)(u.A,{children:[(0,B.jsx)(c.A,{variant:"h3",gutterBottom:!0,children:"Add New Customer"}),(0,B.jsxs)(o.A,{component:"form",onSubmit:e=>{e.preventDefault(),r.A.post("http://localhost:8000/api/customers/",{name:q,mobile:F}).then(()=>{a.oR.success("Customer added successfully!"),E(""),M(""),U(G),V()})},sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,B.jsx)(h.A,{label:"Full Name",variant:"outlined",value:q,onChange:e=>E(e.target.value),required:!0}),(0,B.jsx)(h.A,{label:"Mobile Number",variant:"outlined",value:F,onChange:e=>M(e.target.value)}),(0,B.jsx)(m.A,{type:"submit",variant:"contained",children:"Add Customer"})]})]})})}),(0,B.jsx)(i.A,{item:!0,xs:12,md:6,children:(0,B.jsx)(d.A,{children:(0,B.jsxs)(u.A,{children:[(0,B.jsx)(c.A,{variant:"h3",gutterBottom:!0,children:"Record Payment"}),(0,B.jsxs)(o.A,{component:"form",onSubmit:e=>{e.preventDefault(),T&&_?r.A.post("http://localhost:8000/api/payments/",{customer:T,amount:_}).then(()=>{a.oR.success("Payment recorded successfully!"),W(""),z("")}):a.oR.warn("Please select a customer and enter an amount.")},sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,B.jsxs)(x.A,{fullWidth:!0,children:[(0,B.jsx)(A.A,{children:"Select Customer"}),(0,B.jsx)(j.A,{value:T,label:"Select Customer",onChange:e=>W(e.target.value),required:!0,children:s.map(e=>(0,B.jsx)(p.A,{value:e.id,children:e.name},e.id))})]}),(0,B.jsx)(h.A,{label:"Amount Paid",variant:"outlined",type:"number",value:_,onChange:e=>z(e.target.value),required:!0}),(0,B.jsx)(m.A,{type:"submit",variant:"contained",children:"Record Payment"})]})]})})}),(0,B.jsx)(i.A,{item:!0,xs:12,children:(0,B.jsxs)(d.A,{children:[(0,B.jsxs)(u.A,{children:[(0,B.jsx)(c.A,{variant:"h3",gutterBottom:!0,children:"All Customers"}),(0,B.jsx)(f.A,{children:e.map(e=>(0,B.jsx)(g.Ay,{secondaryAction:(0,B.jsx)(v.A,{edge:"end",onClick:()=>((e,t)=>{Q({id:e,name:t}),L(!0)})(e.id,e.name),children:(0,B.jsx)(P.A,{color:"error"})}),disablePadding:!0,children:(0,B.jsx)(y.A,{component:l.N_,to:"/customer/".concat(e.id),children:(0,B.jsx)(C.A,{primary:e.name})})},e.id))})]}),(0,B.jsx)(o.A,{sx:{display:"flex",justifyContent:"center",p:2},children:(0,B.jsx)(b.A,{count:Math.ceil(I/10),page:G,onChange:(e,t)=>{H(t)},color:"primary"})})]})})]}),(0,B.jsxs)(S.A,{open:K,onClose:X,children:[(0,B.jsx)(k.A,{children:"Confirm Deletion"}),(0,B.jsx)(R.A,{children:(0,B.jsxs)(w.A,{children:['Are you sure you want to delete customer "',null===O||void 0===O?void 0:O.name,'"? This will also delete their entire sales and payment history.']})}),(0,B.jsxs)(D.A,{children:[(0,B.jsx)(m.A,{onClick:X,children:"Cancel"}),(0,B.jsx)(m.A,{onClick:()=>{O&&r.A.delete("http://localhost:8000/api/customers/".concat(O.id,"/")).then(()=>{a.oR.success("Customer deleted successfully!"),U(G),V()}).catch(e=>{console.error("Error deleting customer:",e),a.oR.error("Failed to delete customer.")}).finally(()=>{X()})},color:"error",autoFocus:!0,children:"Delete"})]})]})]})}}}]);
//# sourceMappingURL=145.c09f590c.chunk.js.map