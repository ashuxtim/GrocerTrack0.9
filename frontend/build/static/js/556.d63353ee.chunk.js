"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[556],{6705:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(9992),r=s(579);const o=(0,n.A)((0,r.jsx)("path",{d:"M19 3H4.99c-1.11 0-1.98.89-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.11-.9-2-2-2m0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19z"}),"Inbox")},7556:(e,t,s)=>{s.r(t),s.d(t,{default:()=>H});var n=s(5043),r=s(5352),o=s(9722),l=s(7488),a=s(3969),c=s(5895),i=s(998),d=s(1244),u=s(6128),h=s(6154),m=s(2097),x=s(256),A=s(9067),j=s(4481),p=s(7471),g=s(5315),f=s(2394),y=s(6647),v=s(8403),C=s(6185),b=s(6465),S=s(3023),k=s(1911),w=s(8776),D=s(9200),R=s(5877),P=s(5362),B=s(9059),E=s(579);const H=function(){const[e,t]=(0,n.useState)([]),[s,H]=(0,n.useState)([]),[N,q]=(0,n.useState)(""),[F,L]=(0,n.useState)(""),[M,z]=(0,n.useState)(""),[I,V]=(0,n.useState)(""),[G,T]=(0,n.useState)(1),[W,_]=(0,n.useState)(0),[J,K]=(0,n.useState)(!1),[O,Q]=(0,n.useState)(null),U=e=>{o.A.get("http://localhost:8000/api/customers/?page=".concat(e)).then(e=>{t(e.data.results||[]),_(e.data.count||0)}).catch(e=>{console.error("Error fetching customers:",e),t([])})},X=()=>{o.A.get("http://localhost:8000/api/customers/all/").then(e=>{H(e.data||[])}).catch(e=>{console.error("Error fetching ALL customers:",e),H([])})};(0,n.useEffect)(()=>{U(G)},[G]),(0,n.useEffect)(()=>{X()},[]);const Y=()=>{K(!1),Q(null)};return(0,E.jsxs)(a.A,{children:[(0,E.jsx)(c.A,{variant:"h2",gutterBottom:!0,children:"\ud83d\udc65 Customers"}),(0,E.jsxs)(i.A,{container:!0,spacing:3,children:[(0,E.jsx)(i.A,{item:!0,xs:12,md:6,children:(0,E.jsx)(d.A,{children:(0,E.jsxs)(u.A,{children:[(0,E.jsx)(c.A,{variant:"h3",gutterBottom:!0,children:"Add New Customer"}),(0,E.jsxs)(a.A,{component:"form",onSubmit:e=>{e.preventDefault(),o.A.post("http://localhost:8000/api/customers/",{name:N,mobile:F}).then(()=>{l.oR.success("Customer added successfully!"),q(""),L(""),U(G),X()})},sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,E.jsx)(h.A,{label:"Full Name",variant:"outlined",value:N,onChange:e=>q(e.target.value),required:!0}),(0,E.jsx)(h.A,{label:"Mobile Number",variant:"outlined",value:F,onChange:e=>L(e.target.value)}),(0,E.jsx)(m.A,{type:"submit",variant:"contained",children:"Add Customer"})]})]})})}),(0,E.jsx)(i.A,{item:!0,xs:12,md:6,children:(0,E.jsx)(d.A,{children:(0,E.jsxs)(u.A,{children:[(0,E.jsx)(c.A,{variant:"h3",gutterBottom:!0,children:"Record Payment"}),(0,E.jsxs)(a.A,{component:"form",onSubmit:e=>{e.preventDefault(),M&&I?o.A.post("http://localhost:8000/api/payments/",{customer:M,amount:I}).then(()=>{l.oR.success("Payment recorded successfully!"),z(""),V("")}):l.oR.warn("Please select a customer and enter an amount.")},sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,E.jsxs)(x.A,{fullWidth:!0,children:[(0,E.jsx)(A.A,{children:"Select Customer"}),(0,E.jsx)(j.A,{value:M,label:"Select Customer",onChange:e=>z(e.target.value),required:!0,children:s.map(e=>(0,E.jsx)(p.A,{value:e.id,children:e.name},e.id))})]}),(0,E.jsx)(h.A,{label:"Amount Paid",variant:"outlined",type:"number",value:I,onChange:e=>V(e.target.value),required:!0}),(0,E.jsx)(m.A,{type:"submit",variant:"contained",children:"Record Payment"})]})]})})}),(0,E.jsx)(i.A,{item:!0,xs:12,children:(0,E.jsxs)(d.A,{children:[(0,E.jsxs)(u.A,{children:[(0,E.jsx)(c.A,{variant:"h3",gutterBottom:!0,children:"All Customers"}),e.length>0?(0,E.jsx)(g.A,{children:e.map(e=>(0,E.jsx)(f.Ay,{secondaryAction:(0,E.jsx)(y.A,{edge:"end",onClick:()=>((e,t)=>{Q({id:e,name:t}),K(!0)})(e.id,e.name),children:(0,E.jsx)(P.A,{color:"error"})}),disablePadding:!0,children:(0,E.jsx)(v.A,{component:r.N_,to:"/customer/".concat(e.id),children:(0,E.jsx)(C.A,{primary:e.name})})},e.id))}):(0,E.jsx)(B.A,{title:"No Customers",message:"Get started by adding a new customer."})]}),W>10&&(0,E.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",p:2},children:(0,E.jsx)(b.A,{count:Math.ceil(W/10),page:G,onChange:(e,t)=>{T(t)},color:"primary"})})]})})]}),(0,E.jsxs)(S.A,{open:J,onClose:Y,children:[(0,E.jsx)(k.A,{children:"Confirm Deletion"}),(0,E.jsx)(w.A,{children:(0,E.jsxs)(D.A,{children:['Are you sure you want to delete customer "',null===O||void 0===O?void 0:O.name,'"? This will also delete their entire sales and payment history.']})}),(0,E.jsxs)(R.A,{children:[(0,E.jsx)(m.A,{onClick:Y,children:"Cancel"}),(0,E.jsx)(m.A,{onClick:()=>{O&&o.A.delete("http://localhost:8000/api/customers/".concat(O.id,"/")).then(()=>{l.oR.success("Customer deleted successfully!"),U(G),X()}).catch(e=>{console.error("Error deleting customer:",e),l.oR.error("Failed to delete customer.")}).finally(()=>{Y()})},color:"error",autoFocus:!0,children:"Delete"})]})]})]})}},9059:(e,t,s)=>{s.d(t,{A:()=>a});s(5043);var n=s(3969),r=s(5895),o=s(6705),l=s(579);const a=e=>{let{title:t,message:s}=e;return(0,l.jsxs)(n.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",p:3,height:"100%",minHeight:200,color:"text.secondary"},children:[(0,l.jsx)(o.A,{sx:{fontSize:60,mb:2,color:"neutral.main"}}),(0,l.jsx)(r.A,{variant:"h6",component:"p",gutterBottom:!0,children:t}),(0,l.jsx)(r.A,{variant:"body1",children:s})]})}}}]);
//# sourceMappingURL=556.d63353ee.chunk.js.map